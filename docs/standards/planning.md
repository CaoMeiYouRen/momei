# 墨梅 (Momei) 项目规划与评估规范 (Planning & Evaluation Standards)

## 1. 概述 (Overview)

本文档旨在为 “墨梅博客” 的项目演进提供一套科学、可执行的规范与方法论。通过明确的约束条件和评估矩阵，确保开发资源集中于核心价值，防止项目因 “范围蔓延 (Scope Creep)” 而失去焦点。

## 2. 规划约束 (Planning Constraints)

在进行任何阶段性规划（Phase Planning）或重大功能引入时，必须遵循以下硬性约束：

-   **阶段性聚焦 (Phase Focus)**: 
    -   单个开发迭代 (Phase) 中的核心任务大项应控制在 **5-6 项** 以内。
    -   当新需求加入导致数量超标时，必须遵循 “进一出一” 原则，确保团队精力不被分散。
-   **功能解耦 (Decoupling)**: 
    -   新功能的引入不得破坏现有核心逻辑（如认证、文章显示、SEO）。
    -   如果涉及核心架构变动，必须先进行技术预研并更新 `docs/design/` 文档。
-   **测试先行 (Test-First Planning)**: 
    -   在规划任务时，必须同步制定测试方案（单元测试或端到端测试）。
    -   任何不包含测试补全计划的功能规划均不具备准入资格。
-   **优先级驱动 (Priority Driven)**: 
    -   规划时必须进行 ROI（投资回报率）分析，优先安排对用户体验有直接提升或具有核心竞争力的功能。

-   **需求采访与真实意图抽离 (Requirement Interview & Intent Extraction)**:
    -   针对模糊的需求，智能体**必须**通过“采访”方式反问用户，而非盲目猜测。
    -   采访原则：先结构后细节，一步步递进；一个问题一个问题地问；目标是抽离出最核心、最真实的业务需求。
    -   在核心需求未对齐前，严禁进入开发 (Do) 阶段。

## 3. 评估方法论：Momei 评估矩阵 (Evaluation Methodology)

为了客观评估一个提议的功能或变动是否应进入 “近期规划”，引入以下评分系统 (Score)：

### 3.1 评分维度

| 维度 | 描述 | 分值 (1-5) |
| :--- | :--- | :--- |
| **价值 (Value)** | 对最终用户的核心体验提升或业务价值。 | 1 (低) - 5 (极高) |
| **契合度 (Alignment)** | 与 [项目计划](../plan/roadmap.md) 中长期目标的契合程度。 | 1 (离散) - 5 (核心) |
| **复杂度 (Difficulty)** | 技术实现难度、开发工时及第三方库引入限制。 | 1 (极易) - 5 (极大) |
| **风险 (Risk)** | 带来的潜在 Bug、性能退化或长期地狱式维护成本。 | 1 (安全) - 5 (高危) |

### 3.2 计算公式

$$Score = \frac{Value + Alignment}{Difficulty + Risk}$$

### 3.3 准入基准 (Decision Rules)

-   **Score \> 1.5**: 优先进入当前或下一阶段 Phase。
-   **1.0 \< Score \<= 1.5**: 进入 `Backlog` (待办项)，视剩余资源情况分配。
-   **Score <= 1.0**: 除非是安全性修复 (Hotfix)，否则应予以取消或长期搁置。

## 4. 路线图与待办管理流程 (Management Workflow)

### 4.1 路线图 (Roadmap) 更新
-   `docs/plan/roadmap.md` 每月进行一次大版本审查。
-   已完成的任务应在其旁边标注 `(已完成)`。
-   新的 Phase 必须在上一 Phase 核心指标达成后方可开启。

### 4.2 待办事项 (Todo) 维护
-   `docs/plan/todo.md` 是实时操作手册。
-   任务状态必须清晰标记：`[ ]` (待办), `[x]` (已完成), `[-]` (已取消)。
-   任务描述应包含具体的 "验收标准 (Acceptance Criteria)"。

### 4.3 **不可逆原则：绝不回溯修改已完成阶段**
-   **禁止修改原则**: 一旦某个阶段的任务被标记为 `[x]` (已完成)，严禁回溯修改该阶段的条目，包括但不限于：
    -   修改验收标准
    -   删除已完成的任务
    -   更改任务优先级
    -   重新规划或重新定义已交付的功能
-   **条目放置规则**:
    -   **新功能需求**: 必须添加到当前正在进行的阶段的"待办"部分，或进入"待规划与长期积压"部分
    -   **Bug 修复**: 仅允许添加到当前阶段的"待办"部分，并明确标注为修复类型
    -   **优化需求**: 必须放置在当前阶段或下一阶段，或进入长期积压
-   **变更策略**:
    -   如果发现已完成的功能有不完善之处，应：
        1.  在当前阶段创建 "功能增强" 或 "优化" 任务
        2.  评估后决定是立即执行还是放入长期积压
        3.  基于现有的功能进行扩展，而非删除或重写

## 5. 跨模块变更评估流程

1.  **提交倡议**: 描述新功能或变更的动机。
2.  **自我评估**: 按照 “第 3 章” 的矩阵进行初排分。
3.  **影响范围审计**:
    -   是否涉及数据库 Scheme 变更？
    -   是否影响 i18n 多语言映射？
    -   是否增加前端打包体积？
4.  **决策备案**: 将评估结果记录于相关设计文档中。

## 6. 相关文档

-   [项目规划](../plan/roadmap.md)
-   [待办事项](../plan/todo.md)
-   [开发规范](./development.md)
-   [设计文档汇总](../design/index.md)
