# 国际化系统 (Internationalization)

## 1. 概述 (Overview)

墨梅博客是一个“原生国际化”驱动的平台。国际化深入到了 UI 界面、内容管理、后端逻辑以及邮件通知中心。

## 2. 前端国际化 (Frontend i18n)

### 2.1 架构设计
基于 **Vue-i18n** 与 **PrimeVue**。
- **动态切换**: 支持无刷新切换语言，通过 `$t()` 进行业务文案展示。
- **组件同步**: PrimeVue 的内置文案（如日历、分页）通过全局插件自动与系统语言同步。

## 3. 内容国际化 (Content i18n)

- **语言标识**: 文章、分类、标签实体军带有 `language` 字段。
- **翻译关联**: 同源的多种语言文章通过 `translationId` 进行逻辑聚合。

## 4. 后端全量国际化 (Backend i18n)

在第六阶段，系统实现了基于 Nitro 钩子的后端全量国际化支持：

### 4.1 自动语言感知
后端工具类 `server/utils/i18n.ts` 能够自动从请求中提取 `Accept-Language` 或特定 Header。

### 4.2 核心覆盖领域
- **RSS/Atom Feed**: 根据请求参数 (`/feed/en-US.xml`) 自动生成对应语言的 XML。
- **邮件系统**: 邮件模板（如注册确认、评论回复）根据用户的 `preferredLanguage` 自动切换翻译。
- **错误码与响应**: 后端统一返回的错误消息支持多语言。

## 5. 开发规范
- **禁止硬编码**: 禁止在代码中使用中/英文字符串，必须通过 `i18n/locales/` 下的 JSON 文件定义。
- **强一致性**: 前后端翻译 Key 尽量保持命名空间一致，方便维护。

---
> 关联代码: `plugins/i18n.ts` | `server/utils/i18n.ts` | `i18n/locales/`
