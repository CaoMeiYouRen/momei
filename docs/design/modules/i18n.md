# 国际化系统 (Internationalization)

## 1. 概述 (Overview)

墨梅博客是一个“原生国际化”驱动的平台。国际化不仅体现在 UI 界面上，还深入到了内容管理（文章/分类/标签）、邮件系统以及系统各个角落。

## 2. UI 国际化 (Frontend i18n)

### 2.1 架构设计
墨梅采用 **Vue-i18n** 与 **PrimeVue** 双层国际化系统，支持动态、无刷新的语言切换。

- **Vue-i18n**: 负责业务文案、页面内容的翻译。
- **PrimeVue**: 负责 UI 组件（如日历、分页、对话框）的内置文本。

### 2.2 使用指南
在 Vue 组件中，推荐使用 `$t()` 或 `useI18n()`：

```vue
<template>
  <h1>{{ $t('pages.home.title') }}</h1>
  <Button :label="$t('common.save')" />
</template>

<script setup lang="ts">
const { t } = useI18n()
const message = computed(() => t('common.welcome'))
</script>
```

**注意**: 使用 `computed` 以确保在语言切换时文案能实时更新。

### 2.3 语言切换流程
当用户通过 `LanguageSwitcher` 组件切换语言时：
1. 调用 `setLocale(newLang)`。
2. Vue-i18n 更新应用状态。
3. 全局插件自动同步更新 PrimeVue 的 `locale` 配置。
4. 应用文案和组件内置文案同步更新。

## 3. 内容国际化 (Content i18n)

### 3.1 实体语言标识
文章 (Posts)、分类 (Categories) 和标签 (Tags) 均带有 `language` 字段。系统根据当前前端选定的语言进行内容过滤展示。

### 3.2 翻译聚合
在后台管理界面，同源的多语言实体会进行聚合展示，方便管理员对比和维护不同语言版本的内容。

## 4. 邮件国际化 (Email i18n)

邮件系统拥有独立的国际化管理器，详情请参阅 [邮件系统模块](./email)。

## 5. 开发规范

1. **禁止硬编码**: 禁止在代码中直接使用中文或英文文本，必须通过 `i18n/locales/` 下的 JSON 文件定义。
2. **Key 命名规范**: 使用全小写加点号分隔（如 `pages.admin.users.title`）。
3. **TypeScript 类型支持**: 翻译键值对应保持结构一致，确保类型安全。

---

> 相关配置: [plugins/i18n.ts](https://github.com/CaoMeiYouRen/momei/blob/master/plugins/i18n.ts) | [i18n/locales/](https://github.com/CaoMeiYouRen/momei/tree/master/i18n/locales/)
