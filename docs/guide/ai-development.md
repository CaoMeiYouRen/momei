# AI 协同开发指南 (AI-Driven Development Guide)

本指南旨在向开发者介绍如何利用 AI 智能体（Agents）高效参与墨梅 (Momei) 项目的开发。我们认为，现代开发应当是“人机协同”的，即由人类定义意图，由 AI 负责执行复杂的机械化任务。

## 1. 核心理念：人机双轨 (Hybrid Workflow)

在墨梅项目中，所有的开发任务都可以分为两种路径：

1.  **传统路径**：适用于简单的文本修改、配置调整或 AI 无法触达的极特殊环境。
2.  **AI 增强路径 (推荐)**：适用于功能开发、Bug 修复、大规模重构和测试编写。

## 2. 智能体体系 (Agent System)

项目内置了一套基于 GitHub Copilot (及其他主流 AI) 的智能体角色，详情请参阅 [AGENTS.md](../../AGENTS.md)。

### 如何选择智能体？

| 任务类型 | 推荐智能体 | 常用指令示例 |
| :--- | :--- | :--- |
| **新增功能** | `@full-stack-master` | "按照 `todo.md` 中的要求，实现文章评论功能。" |
| **修复 Bug** | `@full-stack-developer` | "分析并修复文章详情页在移动端布局破碎的问题。" |
| **编写/优化测试** | `@test-engineer` | "为 `auth.ts` 补充边界情况的单元测试。" |
| **理解项目/提问** | `@qa-assistant` | "这个项目的权限系统是如何与 `better-auth` 集成的？" |
| **代码审查** | `@code-reviewer` | "审查我最近的改动，确保符合开发规范。" |

## 3. 标准 AI 工作流 (PDTFC+ 循环)

所有的 AI 代理都严格遵循 PDTFC+ 循环，你也应当通过这个视角来观察和指导 AI：

1.  **Plan (计划)**: AI 会先分析需求并提出修改方案。**你应该在此阶段严格把关。**
2.  **Do (执行)**: AI 自动修改代码。
3.  **Test (测试)**: AI 运行 Lint 和 Vitest。
4.  **Fix (修复)**: AI 自动修正测试中发现的问题。
5.  **Commit (提交 1)**: 提交业务逻辑代码。
6.  **Enhance (增强)**: AI 补齐新功能的测试用例。
7.  **Commit (提交 2)**: 提交测试代码。

## 4. 给开发者的建议 (Best Practices)

-   **清晰定义意图**：在调用智能体前，确保你已经明确了“想要什么”。如果需求模糊，请让智能体先进行“需求采访”。
-   **信任但核实 (Trust but Verify)**：AI 会处理繁琐的细节，但架构选择应由你把控。在 AI 进入 `Commit` 阶段前，仔细审查它的 `Do` 阶段产物。
-   **指定上下文**：如果你知道某个功能相关的具体文件，可以在指令中直接告知 AI（如：`参考 server/api/auth.ts 进行修改`），这能极大节省 AI 的检索时间。

## 5. 针对不同 AI 工具的适配

虽然本项目以 **GitHub Copilot** 开发为主，但以下工具同样适用：

-   **Claude Code**: 由于其强大的上下文推理能力，可以直接读取全站文档后执行任务。
-   **Cursor / Codex**: 建议将 `.github/agents/` 下的指令配置为项目的 "Rules for AI" 或 ".cursorrules"。
-   **Windsurf**: 可以通过其内置的 Flow 模式，配合本项目的 PDTFC+ 规范进行全自动化开发。

---

::: tip 提示
如果你是第一次使用本项目的 AI 工作流，建议尝试让 `@qa-assistant` 向你介绍项目：
> "@qa-assistant 请帮我分析一下这个项目的目录结构和核心技术栈，我是一个新加入的开发者。"
:::
